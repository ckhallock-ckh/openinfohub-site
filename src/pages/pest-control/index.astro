---
import BaseLayout from "../../../layouts/BaseLayout.astro";

const title = "Pest Control";
const description =
  "Straightforward pest control answers: prevention, identification, and when to call a pro.";
const canonical = "https://openinfohub.net/home/pest-control/";

// Get all child guide pages (folders directly under this hub)
const pages = await Astro.glob("./*/index.astro");

const guides = pages
  .map((p) => {
    // URLs end with a trailing slash, so split and grab the last real segment
    const parts = p.url.split("/").filter(Boolean);
    const slug = parts[parts.length - 1];

    return {
      url: p.url,
      title:
        p.frontmatter?.title ??
        slug.replace(/-/g, " ").replace(/\b\w/g, (c) => c.toUpperCase()),
      description: p.frontmatter?.description ?? "",
    };
  })
  .sort((a, b) => a.title.localeCompare(b.title));
---

<BaseLayout title={title} description={description} canonical={canonical}>
  <nav style="font-size:13px; color:#6b7280; margin-bottom:10px;">
    <a href="/home/">Home</a> → <strong>Pest Control</strong>
  </nav>

  <h1 style="margin:0 0 8px;">Pest Control</h1>
  <p style="margin:0 0 18px;">
    Practical answers for common pest problems—what’s normal, what’s not, and what to do next.
  </p>

  <section style="border:1px solid #e5e7eb; border-radius:12px; padding:16px; margin-bottom:18px;">
    <h2 style="margin:0 0 10px; font-size:18px;">Start here</h2>

    {guides.length ? (
      <ul style="margin:0; padding-left:18px;">
        {guides.map((g) => (
          <li style="margin: 10px 0;">
            <a href={g.url} style="font-weight:600;">{g.title}</a>
            {g.description ? (
              <div style="color:#6b7280; font-size:13px; margin-top:4px;">
                {g.description}
              </div>
            ) : null}
          </li>
        ))}
      </ul>
    ) : (
      <p style="margin:0; color:#6b7280;">
        No pages published yet.
      </p>
    )}
  </section>

  <section style="border:1px dashed #d1d5db; border-radius:12px; padding:16px;">
    <h2 style="margin:0 0 8px; font-size:18px;">Coming next (we’ll add these)</h2>
    <ul style="margin:0; padding-left:18px; color:#4b5563;">
      <li>How to find and safely fill groundhog burrows</li>
      <li>Groundhog vs. mole holes: how to tell the difference</li>
      <li>Will mothballs or ammonia repel groundhogs (and what actually works)</li>
      <li>Do ultrasonic repellents work for yard pests?</li>
    </ul>
  </section>
</BaseLayout>

